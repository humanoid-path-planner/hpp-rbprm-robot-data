<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from hyq-description/robots/hyq.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="hyq" xmlns:xacro="http://ros.org/wiki/xacro">
  <!-- The following included files set up definitions of parts of the robot body -->
  <!-- standard distances -->
  <!-- Inertial values -->
  <!-- Trunk with hydraulic system -->
  <!-- Hip assembly -->
  <!-- Upper leg -->
  <!-- Lower leg -->
  <!-- PTU unit -->
  <!-- Asus Xtion Camera Location (Nominally 0) -->
  <!-- Kinect Camera Location (Nominally 0) -->
  <!-- Bumblebee mass and lengths for computing inertia tensor -->
  <!-- Velodyne Lidar Location (Nominally 0) -->
  <!-- HighDef Camera Location (Nominally 0) -->
  <!-- HyQ trunk -->
  <!-- Things that are needed only for Gazebo (not the physical robot). These include sensor and controller plugin specifications -->
  <!-- ================================ Trunk ================================ -->
  <!-- The xacro macro xacro:hyq_base contains: base and trunk -->
  <!-- HyQ legs -->
  <!-- Things that are needed only for Gazebo (not the physical robot). These include sensor and controller plugin specifications -->
  <!-- ================================== Leg ================================== -->
  <!-- The xacro macro xacro:hyq_leg contains: hip assembly, upper and lower leg -->
  <!-- HyQ sensors -->
  <!-- ============================ IMU microstrain ============================== -->
  <!-- The xacro macro xacro:microstrain_3dmgx425_imu: imu frame -->
  <!-- ===================================== ASUS & PROSILICA ==================================== -->
  <!-- The xacro macro xacro:asus_xtion_camera contains: asus xtion and prosilica combo -->
  <!-- Velodyne disabled because it takes too long to load-up -->
  <!-- <xacro:include filename="$(find hyq_description)/urdfs/sensors/velodyne.urdf.xacro"/> -->
  <!-- FIXME: what is this offset? -->
  <!-- ===================================== KINECT & PROSILICA ==================================== -->
  <!-- The xacro macro xacro:kinect_prosilica_camera_swept_back contains: kinect and prosilica combo -->
  <!-- Things that are needed only for Gazebo (not the physical robot). These include sensor and controller plugin specifications -->
  <!-- ================================ Bumblebee ============================== -->
  <!-- The xacro macro xacro:bumblebee contains: camera, mount and optical frame -->
  <!-- A bumblebee with a 97-degre HFOV lens -->
  <!-- A bumblebee with a 66-degre HFOV lens -->
  <!-- A bumblebee with a 43-degre HFOV lens -->
  <!-- A vislab 3dve with a 72-degre HFOV lens -->
  <!-- generic simulator_gazebo plugins for starting mechanism control, ros time -->
  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_controller_manager">
      <robotNamespace>/hyq</robotNamespace>
      <robotSimType>dls_gazebo_interface/DLSHWSim</robotSimType>
      <controlPeriod>0.004</controlPeriod>
    </plugin>
    <plugin filename="libgazebo_ros_p3d.so" name="gazebo_ros_p3d">
      <robotNamespace>/hyq</robotNamespace>
      <bodyName>trunk</bodyName>
      <topicName>odom</topicName>
      <frameName>world</frameName>
      <xyzOffsets>0 0 0</xyzOffsets>
      <rpyOffsets>0 0 0</rpyOffsets>
      <gaussianNoise>0</gaussianNoise>
      <alwaysOn>true</alwaysOn>
      <updateRate>200.0</updateRate>
    </plugin>
  </gazebo>
  <!-- Now we can start using the macros included above to define the actual HyQ -->
  <!-- The first use of a macro. This one was defined in trunk.urdf.xacro above.
A macro like this will expand to a set of link and joint definitions, and to additional
Gazebo-related extensions (sensor plugins, etc). The macro takes an argument, name,
that equals "base", and uses it to generate names for its component links and joints
(e.g., base_link). The included origin block is also an argument to the macro. By convention,
the origin block defines where the component is w.r.t its parent (in this case the parent
is the world frame). For more, see http://www.ros.org/wiki/xacro -->
  <!-- body -->
  <!-- trunk -->
  <!-- Floating-base Joint -->
  <joint name="floating_base" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="trunk"/>
  </joint>
  <!-- Links -->
  <!-- Footprint link -->
  <link name="base_link">
    <visual>
      <geometry>
        <cylinder length="0.01" radius="0.01"/>
      </geometry>
    </visual>
  </link>
  <!-- Trunk link -->
  <link name="trunk">
    <inertial>
      <origin xyz="0.02707 0.0 0.0329"/>
      <mass value="67"/>
      <inertia ixx="1.61053" ixy="-0.0288" ixz="0.34161" iyy="8.53505" iyz="0.0038" izz="9.19102"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://hyq_description/meshes/trunk/trunk.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://hyq_description/meshes/trunk/trunk.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Extensions -->
  <gazebo reference="trunk">
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
  </gazebo>
  <!-- LF leg -->
  <!-- Joints -->
  <!-- Hip assembly joint -->
  <joint name="lf_haa_joint" type="revolute">
    <origin rpy="0 1.57079632679 3.14159265359" xyz="0.3735 0.207 0"/>
    <parent link="trunk"/>
    <child link="lf_hipassembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="-1.2217304764" upper="0.436332312999" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-1.2217304764" soft_upper_limit="0.436332312999"/>
  </joint>
  <!-- Upper leg joint -->
  <joint name="lf_hfe_joint" type="revolute">
    <origin rpy="1.57079632679 0 0" xyz="0.08 0 0"/>
    <parent link="lf_hipassembly"/>
    <child link="lf_upperleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="-0.872664625997" upper="1.2217304764" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-0.872664625997" soft_upper_limit="1.2217304764"/>
  </joint>
  <!-- Lower leg joint -->
  <joint name="lf_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.35 0 0"/>
    <parent link="lf_upperleg"/>
    <child link="lf_lowerleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="-2.44346095279" upper="-0.349065850399" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-2.44346095279" soft_upper_limit="-0.349065850399"/>
    <!-- Foot joint -->
  </joint>
  <joint name="lf_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.341 0 0"/>
    <parent link="lf_lowerleg"/>
    <child link="lf_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="lf_hipassembly">
    <inertial>
      <origin xyz="0.04263         0.0         0.16931"/>
      <mass value="2.93"/>
      <inertia ixx="0.05071" ixy="-4e-05" ixz="-0.00159" iyy="0.05486" iyz="-5e-05" izz="0.00571"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/hipassembly.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0.0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/hipassembly.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Upper leg link -->
  <link name="lf_upperleg">
    <inertial>
      <origin xyz="0.15074 -0.02625 0.0"/>
      <mass value="2.638"/>
      <inertia ixx="0.00368" ixy="-0.00302" ixz="0.0001" iyy="0.02719" iyz="2e-05" izz="0.02811"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0.0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="lf_lowerleg">
    <inertial>
      <origin xyz="0.1254 4e-05 -0.0001"/>
      <mass value="0.881"/>
      <inertia ixx="0.00047" ixy="6e-05" ixz="-1e-05" iyy="0.01256" iyz="-0.0" izz="0.01233"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="lf_foot">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="0.0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
  </link>
  <!-- Extensions -->
  <!-- Hip assembly -->
  <transmission name="lf_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lf_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lf_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="lf_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lf_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lf_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="lf_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lf_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lf_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="lf_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="lf_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="lf_foot">
    <!-- contact sensor -->
    <sensor name="lf_foot_contact_sensor" type="contact">
      <update_rate>1000.0</update_rate>
      <always_on>1</always_on>
      <contact>
        <collision>lf_foot_collision</collision>
        <topic>/lf_foot_contact</topic>
      </contact>
    </sensor>
  </gazebo>
  <!-- RF leg -->
  <!-- Joints -->
  <!-- Hip assembly joint -->
  <joint name="rf_haa_joint" type="revolute">
    <origin rpy="0 1.57079632679 0" xyz="0.3735 -0.207 0"/>
    <parent link="trunk"/>
    <child link="rf_hipassembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="-1.2217304764" upper="0.436332312999" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-1.2217304764" soft_upper_limit="0.436332312999"/>
  </joint>
  <!-- Upper leg joint -->
  <joint name="rf_hfe_joint" type="revolute">
    <origin rpy="-1.57079632679 0 0" xyz="0.08 0 0"/>
    <parent link="rf_hipassembly"/>
    <child link="rf_upperleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="-0.872664625997" upper="1.2217304764" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-0.872664625997" soft_upper_limit="1.2217304764"/>
  </joint>
  <!-- Lower leg joint -->
  <joint name="rf_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.35 0 0"/>
    <parent link="rf_upperleg"/>
    <child link="rf_lowerleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="-2.44346095279" upper="-0.349065850399" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-2.44346095279" soft_upper_limit="-0.349065850399"/>
    <!-- Foot joint -->
  </joint>
  <joint name="rf_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.341 0 0"/>
    <parent link="rf_lowerleg"/>
    <child link="rf_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="rf_hipassembly">
    <inertial>
      <origin xyz="0.04263         -0.0         -0.16931"/>
      <mass value="2.93"/>
      <inertia ixx="0.05071" ixy="4e-05" ixz="0.00159" iyy="0.05486" iyz="-5e-05" izz="0.00571"/>
    </inertial>
    <visual>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/hipassembly.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/hipassembly.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Upper leg link -->
  <link name="rf_upperleg">
    <inertial>
      <origin xyz="0.15074 -0.02625 0.0"/>
      <mass value="2.638"/>
      <inertia ixx="0.00368" ixy="-0.00302" ixz="0.0001" iyy="0.02719" iyz="2e-05" izz="0.02811"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0.0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="rf_lowerleg">
    <inertial>
      <origin xyz="0.1254 4e-05 -0.0001"/>
      <mass value="0.881"/>
      <inertia ixx="0.00047" ixy="6e-05" ixz="-1e-05" iyy="0.01256" iyz="-0.0" izz="0.01233"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="rf_foot">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="0.0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
  </link>
  <!-- Extensions -->
  <!-- Hip assembly -->
  <transmission name="rf_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rf_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rf_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="rf_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rf_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rf_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="rf_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rf_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rf_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="rf_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="rf_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="rf_foot">
    <!-- contact sensor -->
    <sensor name="rf_foot_contact_sensor" type="contact">
      <update_rate>1000.0</update_rate>
      <always_on>1</always_on>
      <contact>
        <collision>rf_foot_collision</collision>
        <topic>/rf_foot_contact</topic>
      </contact>
    </sensor>
  </gazebo>
  <!-- LH leg -->
  <!-- Joints -->
  <!-- Hip assembly joint -->
  <joint name="lh_haa_joint" type="revolute">
    <origin rpy="0 1.57079632679 3.14159265359" xyz="-0.3735 0.207 0"/>
    <parent link="trunk"/>
    <child link="lh_hipassembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="-1.2217304764" upper="0.436332312999" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-1.2217304764" soft_upper_limit="0.436332312999"/>
  </joint>
  <!-- Upper leg joint -->
  <joint name="lh_hfe_joint" type="revolute">
    <origin rpy="1.57079632679 0 0" xyz="0.08 0 0"/>
    <parent link="lh_hipassembly"/>
    <child link="lh_upperleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="-1.2217304764" upper="0.872664625997" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-1.2217304764" soft_upper_limit="0.872664625997"/>
  </joint>
  <!-- Lower leg joint -->
  <joint name="lh_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.35 0 0"/>
    <parent link="lh_upperleg"/>
    <child link="lh_lowerleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="0.349065850399" upper="2.44346095279" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="0.349065850399" soft_upper_limit="2.44346095279"/>
    <!-- Foot joint -->
  </joint>
  <joint name="lh_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.341 0 0"/>
    <parent link="lh_lowerleg"/>
    <child link="lh_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="lh_hipassembly">
    <inertial>
      <origin xyz="0.04263         -0.0         -0.16931"/>
      <mass value="2.93"/>
      <inertia ixx="0.05071" ixy="4e-05" ixz="0.00159" iyy="0.05486" iyz="-5e-05" izz="0.00571"/>
    </inertial>
    <visual>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/hipassembly.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/hipassembly.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Upper leg link -->
  <link name="lh_upperleg">
    <inertial>
      <origin xyz="0.15074 0.02625 0.0"/>
      <mass value="2.638"/>
      <inertia ixx="0.00368" ixy="0.00302" ixz="-0.0001" iyy="0.02719" iyz="2e-05" izz="0.02811"/>
    </inertial>
    <visual>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="lh_lowerleg">
    <inertial>
      <origin xyz="0.1254 -4e-05 0.0001"/>
      <mass value="0.881"/>
      <inertia ixx="0.00047" ixy="-6e-05" ixz="1e-05" iyy="0.01256" iyz="-0.0" izz="0.01233"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="lh_foot">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="0.0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
  </link>
  <!-- Extensions -->
  <!-- Hip assembly -->
  <transmission name="lh_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lh_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lh_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="lh_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lh_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lh_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="lh_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lh_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lh_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="lh_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="lh_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="lh_foot">
    <!-- contact sensor -->
    <sensor name="lh_foot_contact_sensor" type="contact">
      <update_rate>1000.0</update_rate>
      <always_on>1</always_on>
      <contact>
        <collision>lh_foot_collision</collision>
        <topic>/lh_foot_contact</topic>
      </contact>
    </sensor>
  </gazebo>
  <!-- RH leg -->
  <!-- Joints -->
  <!-- Hip assembly joint -->
  <joint name="rh_haa_joint" type="revolute">
    <origin rpy="0 1.57079632679 0" xyz="-0.3735 -0.207 0"/>
    <parent link="trunk"/>
    <child link="rh_hipassembly"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="-1.2217304764" upper="0.436332312999" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-1.2217304764" soft_upper_limit="0.436332312999"/>
  </joint>
  <!-- Upper leg joint -->
  <joint name="rh_hfe_joint" type="revolute">
    <origin rpy="-1.57079632679 0 0" xyz="0.08 0 0"/>
    <parent link="rh_hipassembly"/>
    <child link="rh_upperleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="-1.2217304764" upper="0.872664625997" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-1.2217304764" soft_upper_limit="0.872664625997"/>
  </joint>
  <!-- Lower leg joint -->
  <joint name="rh_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.35 0 0"/>
    <parent link="rh_upperleg"/>
    <child link="rh_lowerleg"/>
    <axis xyz="0 0 1"/>
    <limit effort="150.0" lower="0.349065850399" upper="2.44346095279" velocity="12.0"/>
    <dynamics damping="0.1" friction="0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="0.349065850399" soft_upper_limit="2.44346095279"/>
    <!-- Foot joint -->
  </joint>
  <joint name="rh_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.341 0 0"/>
    <parent link="rh_lowerleg"/>
    <child link="rh_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="rh_hipassembly">
    <inertial>
      <origin xyz="0.04263         0.0         0.16931"/>
      <mass value="2.93"/>
      <inertia ixx="0.05071" ixy="-4e-05" ixz="-0.00159" iyy="0.05486" iyz="-5e-05" izz="0.00571"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/hipassembly.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0.0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/hipassembly.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Upper leg link -->
  <link name="rh_upperleg">
    <inertial>
      <origin xyz="0.15074 0.02625 0.0"/>
      <mass value="2.638"/>
      <inertia ixx="0.00368" ixy="0.00302" ixz="-0.0001" iyy="0.02719" iyz="2e-05" izz="0.02811"/>
    </inertial>
    <visual>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="rh_lowerleg">
    <inertial>
      <origin xyz="0.1254 -4e-05 0.0001"/>
      <mass value="0.881"/>
      <inertia ixx="0.00047" ixy="-6e-05" ixz="1e-05" iyy="0.01256" iyz="-0.0" izz="0.01233"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://hyq_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="rh_foot">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="0.0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
  </link>
  <!-- Extensions -->
  <!-- Hip assembly -->
  <transmission name="rh_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rh_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rh_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="rh_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rh_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rh_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="rh_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rh_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rh_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="rh_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="rh_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="rh_foot">
    <!-- contact sensor -->
    <sensor name="rh_foot_contact_sensor" type="contact">
      <update_rate>1000.0</update_rate>
      <always_on>1</always_on>
      <contact>
        <collision>rh_foot_collision</collision>
        <topic>/rh_foot_contact</topic>
      </contact>
    </sensor>
  </gazebo>
  <!-- IMU trunk -->
  <!-- Joint -->
  <joint name="imu_joint" type="fixed">
    <origin rpy="0 -3.14159265359 0" xyz="0.290 0.000 0.0999214"/>
    <parent link="trunk"/>
    <child link="imu"/>
  </joint>
  <!-- Link -->
  <link name="imu">
    <inertial>
      <origin xyz="-0.00020  0.00010  0.00110"/>
      <mass value="0.018"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.00485 0 -0.00105"/>
      <geometry>
        <box size="0.0329 0.0244 0.0111"/>
      </geometry>
      <material name="black">
        <color rgba="0 0 0 0.9"/>
      </material>
    </visual>
  </link>
  <!-- IMU Gazebo plugin definition -->
  <gazebo>
    <plugin filename="libgazebo_ros_imu.so" name="imu_controller">
      <alwaysOn>true</alwaysOn>
      <updateRate>250</updateRate>
      <bodyName>imu</bodyName>
      <topicName>trunk_imu/data</topicName>
      <gaussianNoise>4e-08</gaussianNoise>
      <xyzOffset>0 0 0</xyzOffset>
      <rpyOffset>0 0 0</rpyOffset>
      <serviceName>/default_imu</serviceName>
    </plugin>
  </gazebo>
  <!-- Imu definition required for HyQ2Max hardware interface of ros control -->
  <gazebo reference="imu">
    <sensor name="trunk_imu" type="imu">
      <always_on>1</always_on>
      <update_rate>250</update_rate>
      <imu>
        <noise>
          <type>gaussian</type>
          <rate>
            <mean>0</mean>
            <stddev>0.0002</stddev>
            <bias_mean>0.00087</bias_mean>
            <bias_stddev>8e-07</bias_stddev>
          </rate>
          <accel>
            <mean>0</mean>
            <stddev>0.017</stddev>
            <bias_mean>0.002</bias_mean>
            <bias_stddev>0.001</bias_stddev>
          </accel>
        </noise>
      </imu>
    </sensor>
  </gazebo>
  <!-- Velodyne -->
  <xacro:velodyne name="velodyne" parent="trunk">
    <!--origin xyz="0.39 0 0.269" rpy="0 0 3.14"/-->
    <!--origin xyz="0.39 0.0 0.269" rpy="0 0.0 3.10"/-->
    <origin rpy="0.0084 -0.0169 3.14371" xyz="0.39 0.0 0.271"/>
  </xacro:velodyne>
  <!-- Hokuyo -->
  <joint name="laser_joint" type="fixed">
    <axis xyz="0 0 0"/>
    <origin rpy="3.14 0.0 0" xyz="0.475 0.0 -0.08823"/>
    <parent link="trunk"/>
    <child link="laser_mount_link"/>
  </joint>
  <!-- go from the base of the laser to the actual sensor location -->
  <joint name="laser_laser_joint" type="fixed">
    <origin xyz="0 0 0.058"/>
    <parent link="laser_mount_link"/>
    <child link="laser"/>
  </joint>
  <link name="laser_mount_link">
    <inertial>
      <mass value="0.001"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.000001" iyz="0" izz="0.0001"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/sensors/hokuyo.dae" scale="0.0254 0.0254 0.0254"/>
      </geometry>
    </visual>
    <!-- ignore the collision element -->
  </link>
  <link name="laser" type="laser">
    <inertial>
      <mass value="0.001"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.000001" iyz="0" izz="0.0001"/>
    </inertial>
  </link>
  <!-- gazebo extensions -->
  <xacro:hokuyo_laser_gazebo max_angle="5" min_angle="-5" name="laser_laser" range="4.0" ros_topic="scan" update_rate="10"/>
  <!-- Hokuyo -->
  <!--xacro:hokuyo_utm30lx
		name="laser"
		parent="trunk"
		ros_topic="scan" 
		update_rate="10"
		ray_count="1"
		min_angle="-5"
		max_angle="5">
		<origin xyz="0.475 0.0 -0.133" rpy="3.14 0.0 0"/>
	</xacro:hokuyo_utm30lx-->
  <!--xacro:hokuyo_mount name="nav_hokuyo" parent="front_left_vertical_beam" length="${SENSOR_BEAM_LENGTH*INCH_TO_M}" ros_topic="scan" update_rate="10" min_angle="${-(5 * M_PI)/12}" max_angle="${(5 * M_PI)/12}" range="4.0">
    <origin xyz="0 -${0.5*INCH_TO_M} ${7*INCH_TO_M}" rpy="${M_PI/2} ${M_PI/2} 0" />
  </xacro:hokuyo_mount-->
  <!-- PTU unit -->
  <!-- Joints -->
  <joint name="ptu_joint" type="fixed">
    <origin rpy="-0.013127 0.569257 -0.007748" xyz="0.677 0.004 0.111"/>
    <parent link="trunk"/>
    <child link="ptu_base_link"/>
  </joint>
  <!-- There's an offset between the origin of the pan joint and the origin of 
        	 the overall device, which is between the mounting screws on its base. -->
  <joint name="ptu_base" type="fixed">
    <origin rpy="0 0 0" xyz="0 -0.0127254 0.022"/>
    <parent link="ptu_base_link"/>
    <child link="ptu_pan_link"/>
  </joint>
  <!-- The pan joint -->
  <joint name="ptu_pan" type="revolute">
    <origin rpy="-1.57079632679 0 0" xyz="0 0 0.066"/>
    <parent link="ptu_pan_link"/>
    <child link="ptu_tilt_link"/>
    <axis xyz="0 -1 0"/>
    <limit effort="30" lower="-2.775" upper="2.775" velocity="1.0"/>
  </joint>
  <!-- The tilt joint -->
  <joint name="ptu_tilt" type="revolute">
    <origin rpy="-1.57079632679 0 0" xyz="0 -0.002424 0"/>
    <parent link="ptu_tilt_link"/>
    <child link="ptu_tilted_link"/>
    <axis xyz="0 1 0"/>
    <limit effort="30" lower="-0.82" upper="0.52" velocity="1.0"/>
  </joint>
  <!-- Fixed joint to provide a convenient attachment point for accessories. -->
  <joint name="ptu_mount" type="fixed">
    <origin rpy="3.14159265359 0 0" xyz="0 0 -0.039116"/>
    <parent link="ptu_tilted_link"/>
    <child link="ptu_mount_link"/>
  </joint>
  <!-- Links -->
  <link name="ptu_pan_link">
    <inertial>
      <origin xyz="0.0 0.0 0.0"/>
      <mass value="0.65"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <material name="ptu_body_color">
        <color rgba="0.28 0.28 0.28 1"/>
      </material>
      <geometry>
        <box size="0.045 0.065 0.044"/>
      </geometry>
      <origin xyz="0 0.011 0"/>
    </visual>
    <visual>
      <geometry>
        <box size="0.046 0.044 0.044"/>
      </geometry>
      <origin xyz="-0.045 0.0215 0"/>
    </visual>
    <visual>
      <geometry>
        <cylinder length="0.015" radius="0.005"/>
      </geometry>
      <origin rpy="0 1.57 0" xyz="-0.074 0.021 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.045 0.065 0.044"/>
      </geometry>
      <origin xyz="0 0.011 0"/>
    </collision>
    <collision>
      <geometry>
        <box size="0.046 0.044 0.044"/>
      </geometry>
      <origin xyz="-0.045 0.0215 0"/>
    </collision>
    <collision>
      <geometry>
        <cylinder length="0.015" radius="0.005"/>
      </geometry>
      <origin rpy="0 1.57 0" xyz="-0.074 0.021 0"/>
    </collision>
  </link>
  <gazebo reference="ptu_pan_link">
    <material>Gazebo/Grey</material>
  </gazebo>
  <link name="ptu_tilt_link">
    <inertial>
      <origin xyz="0.0 0.0 0.0"/>
      <mass value="0.65"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <material name="ptu_body_color">
        <color rgba="0.28 0.28 0.28 1"/>
      </material>
      <geometry>
        <box size="0.045 0.065 0.044"/>
      </geometry>
      <origin xyz="0 0.011 0"/>
    </visual>
    <visual>
      <geometry>
        <box size="0.046 0.044 0.044"/>
      </geometry>
      <origin xyz="-0.045 0.0215 0"/>
    </visual>
    <visual>
      <geometry>
        <cylinder length="0.015" radius="0.005"/>
      </geometry>
      <origin rpy="0 1.57 0" xyz="-0.074 0.021 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.045 0.065 0.044"/>
      </geometry>
      <origin xyz="0 0.011 0"/>
    </collision>
    <collision>
      <geometry>
        <box size="0.046 0.044 0.044"/>
      </geometry>
      <origin xyz="-0.045 0.0215 0"/>
    </collision>
    <collision>
      <geometry>
        <cylinder length="0.015" radius="0.005"/>
      </geometry>
      <origin rpy="0 1.57 0" xyz="-0.074 0.021 0"/>
    </collision>
  </link>
  <gazebo reference="ptu_tilt_link">
    <material>Gazebo/Grey</material>
  </gazebo>
  <link name="ptu_base_link">
    <inertial>
      <origin xyz="0.0 0.0 0.0"/>
      <mass value="0.01"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <geometry>
        <box size="0.001 0.001 0.001"/>
      </geometry>
      <origin xyz="0 0 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.001 0.001 0.001"/>
      </geometry>
      <origin xyz="0 0 0"/>
    </collision>
  </link>
  <link name="ptu_tilted_link">
    <inertial>
      <origin xyz="0.0 0.0 0.0"/>
      <mass value="0.01"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <geometry>
        <box size="0.001 0.001 0.001"/>
      </geometry>
      <origin xyz="0 0 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.001 0.001 0.001"/>
      </geometry>
      <origin xyz="0 0 0"/>
    </collision>
  </link>
  <link name="ptu_mount_link">
    <inertial>
      <origin xyz="0.0 0.0 0.0"/>
      <mass value="0.01"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <geometry>
        <box size="0.001 0.001 0.001"/>
      </geometry>
      <origin xyz="0 0 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.001 0.001 0.001"/>
      </geometry>
      <origin xyz="0 0 0"/>
    </collision>
  </link>
  <!-- Extensions -->
  <!-- Pan assembly -->
  <transmission name="ptu_pan_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="ptu_pan">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="ptu_pan_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Tilt assembly -->
  <transmission name="ptu_tilt_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="ptu_tilt">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="ptu_tilt_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Asus Xtion Pro -->
  <!--<origin xyz="0 0.005 0.036" rpy="0 0 0"/> with Bumblebee setup -->
  <!--<origin xyz="0 0 0.04397" rpy="0 0 0"/> with Vislab setup -->
  <!-- Joints -->
  <joint name="asus_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0.005 0.036"/>
    <parent link="ptu_mount_link"/>
    <child link="asus_mount_link"/>
  </joint>
  <!-- asus ir sensor physical attachment -->
  <joint name="asus_depth_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.009 0.045 0.035"/>
    <parent link="asus_mount_link"/>
    <child link="asus_depth_frame"/>
  </joint>
  <!-- asus xtion ir sensor frame -->
  <joint name="asus_depth_optical_frame_joint" type="fixed">
    <origin rpy="-1.57079632679 0.0 -1.57079632679" xyz="0.009 0.045 0.035"/>
    <parent link="asus_mount_link"/>
    <child link="asus_depth_optical_frame"/>
  </joint>
  <!-- asus_xtion rgb sensor physical attachment -->
  <joint name="asus_rgb_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.009 0.01875 0.035"/>
    <parent link="asus_mount_link"/>
    <child link="asus_rgb_frame"/>
  </joint>
  <!-- asus xtion rgb sensor frame -->
  <joint name="asus_rgb_optical_frame_joint" type="fixed">
    <origin rpy="-1.57079632679 0.0 -1.57079632679" xyz="0.009 0.01875 0.035"/>
    <parent link="asus_mount_link"/>
    <child link="asus_rgb_optical_frame"/>
  </joint>
  <!-- Links -->
  <link name="asus_mount_link">
    <inertial>
      <mass value="0.1"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/sensors/asus_xtion.dae" scale="1 1 1"/>
      </geometry>
      <material name="gray">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.035"/>
      <geometry>
        <box size="0.05 .18 0.035"/>
      </geometry>
    </collision>
  </link>
  <!-- ir sensor link -->
  <link name="asus_depth_frame">
    <inertial>
      <mass value="0.1"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.0005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.0005"/>
      </geometry>
    </collision>
  </link>
  <!-- ir optical sensor link -->
  <link name="asus_depth_optical_frame"/>
  <!-- rgb sensor link -->
  <link name="asus_rgb_frame">
    <inertial>
      <mass value="0.1"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.0005"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.0005"/>
      </geometry>
    </collision>
  </link>
  <!-- rgb optical sensor link -->
  <link name="asus_rgb_optical_frame"/>
  <!-- gazebo extensions -->
  <gazebo reference="asus_depth_frame">
    <sensor name="asus_depth_frame_depth_sensor" type="depth">
      <always_on>true</always_on>
      <update_rate>1.0</update_rate>
      <camera>
        <horizontal_fov>1.01229096616</horizontal_fov>
        <image>
          <format>L8</format>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.8</near>
          <far>3.5</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_openni_kinect.so" name="asus_depth_frame_controller">
        <baseline>0.2</baseline>
        <alwaysOn>true</alwaysOn>
        <updateRate>1.0</updateRate>
        <cameraName>asus_ir</cameraName>
        <imageTopicName>/asus/depth/image_raw</imageTopicName>
        <cameraInfoTopicName>/asus/depth/camera_info</cameraInfoTopicName>
        <depthImageTopicName>/asus/depth/image_raw</depthImageTopicName>
        <depthImageCameraInfoTopicName>/asus/depth/camera_info</depthImageCameraInfoTopicName>
        <pointCloudTopicName>/asus/depth/points</pointCloudTopicName>
        <frameName>asus_depth_optical_frame</frameName>
        <pointCloudCutoff>0.5</pointCloudCutoff>
        <distortionK1>0.00000001</distortionK1>
        <distortionK2>0.00000001</distortionK2>
        <distortionK3>0.00000001</distortionK3>
        <distortionT1>0.00000001</distortionT1>
        <distortionT2>0.00000001</distortionT2>
        <CxPrime>0</CxPrime>
        <Cx>0</Cx>
        <Cy>0</Cy>
        <focalLength>0</focalLength>
        <hackBaseline>0</hackBaseline>
      </plugin>
    </sensor>
    <material value="Gazebo/Red"/>
  </gazebo>
  <gazebo reference="asus_rgb_frame">
    <sensor name="asus_rgb_frame_rgb_sensor" type="depth">
      <always_on>true</always_on>
      <update_rate>30.0</update_rate>
      <camera>
        <horizontal_fov>1.01229096616</horizontal_fov>
        <image>
          <format>R8G8B8</format>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.8</near>
          <far>3.5</far>
        </clip>
      </camera>
      <plugin filename="libgazebo_ros_openni_kinect.so" name="asus_rgb_frame_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>1.0</updateRate>
        <cameraName>asus_rgb</cameraName>
        <imageTopicName>/asus/rgb/image_raw</imageTopicName>
        <cameraInfoTopicName>/asus/rgb/camera_info</cameraInfoTopicName>
        <depthImageTopicName>/asus/depth/image_raw</depthImageTopicName>
        <depthImageCameraInfoTopicName>/asus/depth/camera_info</depthImageCameraInfoTopicName>
        <pointCloudTopicName>/asus/depth_registered/points</pointCloudTopicName>
        <frameName>asus_rgb_optical_frame</frameName>
        <pointCloudCutoff>0.5</pointCloudCutoff>
        <distortionK1>0.00000001</distortionK1>
        <distortionK2>0.00000001</distortionK2>
        <distortionK3>0.00000001</distortionK3>
        <distortionT1>0.00000001</distortionT1>
        <distortionT2>0.00000001</distortionT2>
        <CxPrime>0</CxPrime>
        <Cx>0</Cx>
        <Cy>0</Cy>
        <focalLength>0</focalLength>
        <hackBaseline>0</hackBaseline>
      </plugin>
    </sensor>
    <material value="Gazebo/Red"/>
  </gazebo>
  <!-- Kinect -->
  <!-- is no more used, but we keep it for compatibilty -->
  <!--xacro:kinect_camera
		name="head_mount"
		parent="trunk">
		<origin xyz="0.63 0 0.095" rpy="0 0 0"/>
	</xacro:kinect_camera-->
  <!-- Bumblebee -->
  <joint name="bumblebee_mount_joint" type="fixed">
    <parent link="ptu_mount_link"/>
    <child link="bumblebee_mount_link"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <joint name="bumblebee_optical_joint" type="fixed">
    <parent link="bumblebee_mount_link"/>
    <child link="bumblebee_optical_frame"/>
    <origin rpy="-1.57079632679 0 -1.57079632679" xyz="0 -0.06 0.018"/>
  </joint>
  <link name="bumblebee_mount_link">
    <visual>
      <origin rpy="1.57079632679 0 1.57079632679" xyz="0 0 0.018"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/sensors/bumblebee.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 1.57079632679" xyz="0 0 0.018"/>
      <geometry>
        <mesh filename="package://hyq_description/meshes/sensors/bumblebee.dae"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.342"/>
      <inertia ixx="0.00010096866" ixy="0" ixz="0" iyy="0.00076652916" iyz="0" izz="0.0007394325"/>
    </inertial>
  </link>
  <link name="bumblebee_optical_frame">
    <inertial>
      <mass value="1E-6"/>
      <inertia ixx="1E-6" ixy="0" ixz="0" iyy="1E-6" iyz="0" izz="1E-6"/>
    </inertial>
  </link>
  <gazebo reference="bumblebee_mount_link">
    <sensor name="stereo_camera" type="multicamera">
      <update_rate>48</update_rate>
      <camera name="left">
        <pose> 0 0.06 0 0 0 0</pose>
        <horizontal_fov>1.69296937443</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.05</near>
          <far>300</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <camera name="right">
        <pose> 0 -0.06 0 0 0 0</pose>
        <horizontal_fov>1.69296937443</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.05</near>
          <far>300</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <plugin filename="libgazebo_ros_multicamera.so" name="stereo_camera_controller">
        <alwaysOn>true</alwaysOn>
        <cameraName>bumblebee/camera</cameraName>
        <imageTopicName>image_raw</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <frameName>bumblebee_mount_link</frameName>
        <hackBaseline>0.12</hackBaseline>
        <!--<rightFrameName>right_camera_optical_frame</rightFrameName>-->
        <!-- NOTE: Distortion is currently unused -->
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
      </plugin>
    </sensor>
  </gazebo>
  <!--	<xacro:vislab_3dve_72
		name="vislab_3dve"
		parent="ptu_mount_link"
		xyz="0 0 0.025"
		rpy="0 0 0"
		high_res="false"/>-->
</robot>
